DM 'LOG; CLEAR; ODSRESULTS; CLEAR; ';
DATA sas3; 
INPUT center program gender $ subject wtloss @@;
DATALINES;
1 1 F 1 17.2299 5 1 F 1 11.6695 1 1 F 2 15.7648 5 1 F 2 12.1876
1 2 F 1 19.2342 5 2 F 1 11.6978 1 2 F 2 18.0468 5 2 F 2 10.0957
1 3 F 1 9.1973 5 3 F 1 7.4432 1 3 F 2 8.6906 5 3 F 2 5.9384
1 1 M 1 17.4656 5 1 M 1 10.9597 1 1 M 2 15.9233 5 1 M 2 11.2989
1 2 M 1 24.2613 5 2 M 1 18.3452 1 2 M 2 25.3422 5 2 M 2 18.1953
1 3 M 1 19.6999 5 3 M 1 17.3051 1 3 M 2 18.3468 5 3 M 2 17.2238
2 1 F 1 14.9102 6 1 F 1 16.4390 2 1 F 2 15.5265 6 1 F 2 16.9725
2 2 F 1 24.5785 6 2 F 1 26.3404 2 2 F 2 22.9297 6 2 F 2 25.6193
2 3 F 1 21.4465 6 3 F 1 23.5122 2 3 F 2 19.4496 6 3 F 2 20.7551
2 1 M 1 17.7488 6 1 M 1 19.4338 2 1 M 2 18.6772 6 1 M 2 16.2848
2 2 M 1 18.6206 6 2 M 1 19.9519 2 2 M 2 19.6741 6 2 M 2 22.5633
2 3 M 1 16.2433 6 3 M 1 17.4446 2 3 M 2 16.9580 6 3 M 2 19.0843
3 1 F 1 9.4561 7 1 F 1 10.1201 3 1 F 2 10.0818 7 1 F 2 10.9801
3 2 F 1 19.9627 7 2 F 1 15.4252 3 2 F 2 21.6687 7 2 F 2 14.9049
3 3 F 1 20.5674 7 3 F 1 16.3866 3 3 F 2 20.1926 7 3 F 2 17.3304
3 1 M 1 14.5206 7 1 M 1 13.9226 3 1 M 2 15.4205 7 1 M 2 14.7064
3 2 M 1 16.1217 7 2 M 1 25.6431 3 2 M 2 16.7883 7 2 M 2 25.9734
3 3 M 1 11.7393 7 3 M 1 20.9447 3 3 M 2 11.8407 7 3 M 2 21.4765
4 1 F 1 18.4680 8 1 F 1 11.4767 4 1 F 2 17.8540 8 1 F 2 12.4374
4 2 F 1 25.7911 8 2 F 1 34.4723 4 2 F 2 24.0275 8 2 F 2 34.6249
4 3 F 1 15.1685 8 3 F 1 20.8010 4 3 F 2 16.4565 8 3 F 2 20.3882
4 1 M 1 15.0173 8 1 M 1 25.4748 4 1 M 2 15.0015 8 1 M 2 25.3372
4 2 M 1 23.0530 8 2 M 1 25.1632 4 2 M 2 23.3327 8 2 M 2 25.9337
4 3 M 1 20.8105 8 3 M 1 19.9659 4 3 M 2 20.9137 8 3 M 2 20.9266
;
/* USING MIXED PROCEDURE METHOD =TYPE3 PRODUCES EXPECTED MEAN SQUARES */
TITLE3 "USING METHOD = TYPE3 PRODUCES EXPECTED MEAN SQUARES";
PROC MIXED DATA = sas3 METHOD = TYPE3; /* TYPE3 = Method of Moments */
CLASS center program gender subject; /* All Treatments */
MODEL wtloss = program | gender | subject ; /* Only Fixed Effects; DDFM = KR */
RANDOM center center*program center*gender center*subject; /* Random Statement */
LSMEANS program / PDIFF CL ALPHA = 0.01; /* Default ADJUST is F-LSD */
RUN; QUIT;

/* USING MIXED PROCEDURE, REML METHOD */
TITLE3 "USING MIXED PROCEDURE, METHOD = REML";
PROC MIXED DATA = sas3 METHOD = REML PLOT = RESIDUALPANEL; /* DEFAULT METHOD IS REML */
CLASS center program gender subject; /* All Treatments */
MODEL wtloss = program | gender | subject / DDFM = SATTERTH; /* Only Fixed Effects; DDFM = KR */
RANDOM center center*program center*gender center*subject; /* Random Component */
LSMEANS program / PDIFF CL ALPHA = 0.01; /* Default ADJUST is F-LSD */
RUN; QUIT;
